<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PTT Article Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        .markdown {
            font-family: Arial, sans-serif;
            /* line-height: 1.5; */
        }
    </style>
</head>
<body>
    <h1>PTT Article Analysis</h1>
    <form method="POST">
        <label for="board">看板名稱：</label>
        <input type="text" id="board" name="board" required>
        <label for="keyword">關鍵字：</label>
        <input type="text" id="keyword" name="keyword" required>
        <button type="submit">搜尋</button>
    </form>
    {% if results %}
        <h2>搜尋結果：</h2>
        {% for article in results %}
            <h3>{{ article.title }}</h3>
            <p>{{ article.content }}</p>
            <h4>回覆：</h4>
            <ul>
                {% for reply in article.replies %}
                    <li>{{ reply }}</li>
                {% endfor %}
            </ul>
            <p><strong>分析結果：</strong> <span class="markdown" id="analysis-{{ loop.index }}">{{ article.analysis }}</span></p>
        {% endfor %}
    {% endif %}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const markdownElements = document.querySelectorAll('.markdown');
            markdownElements.forEach(function(element) {
                const markdownContent = element.innerHTML.trim();
                console.log("Markdown Content:", markdownContent); // 確認 Markdown 內容
                element.innerHTML = marked.parse(markdownContent); // 使用 marked.parse 轉換為 HTML
            });
        });
    </script>
</body>
</html>
